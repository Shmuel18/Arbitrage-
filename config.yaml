# Trinity Arbitrage Engine v3.0

system:
  name: "Trinity Arbitrage Engine"
  version: "3.0.0"

risk_limits:
  max_margin_usage: 0.70
  max_position_size_usd: 10000
  delta_threshold_pct: 5.0
  position_size_pct: 0.70

trading_params:
  min_funding_spread: 0.5 # minimum gross funding-rate spread per 8h settlement (%)
  min_immediate_spread: 0.5 # minimum IMMEDIATE spread (next payment) — no "inflated 8h" tricks
  min_net_pct: 0.01 # minimum net spread after fees (%) — safety floor
  max_slippage_pct: 0.10 # max price slippage to allow entry (%)
  slippage_buffer_pct: 0.015
  safety_buffer_pct: 0.02
  basis_buffer_pct: 0.01
  cooldown_after_orphan_hours: 2
  max_sane_funding_rate: 0.10 # max absolute funding rate before filtering (10%)
  entry_offset_seconds: 900
  exit_offset_seconds: 900
  max_entry_window_minutes: 60 # Only scan opportunities with funding < 60 min away
  quick_cycle: true # Exit after first funding payment (zero dead time)
  hold_min_spread: 0.5 # Min spread % to hold position after funding collection
  upgrade_spread_delta: 0.5 # Switch to a better opportunity if its spread is +N% higher
  top_opportunities_display: 5
  execute_only_best_opportunity: true

execution:
  concurrent_opportunities: 3
  order_timeout_ms: 10000
  batch_scan_concurrent: true
  scan_parallelism: 10

risk_guard:
  fast_loop_interval_sec: 5
  deep_loop_interval_sec: 60
  enable_panic_close: true
  scanner_interval_sec: 10

exchanges:
  enabled:
    - binance
    - bybit
    - okx
    - kucoin
    - kraken
    - gateio

  binance:
    name: "Binance Futures"
    ccxt_id: "binanceusdm"
    default_type: "future"
    rate_limit_ms: 50
    max_leverage: 20
    leverage: 5
    margin_mode: "isolated"
    position_mode: "oneway"

  bybit:
    name: "Bybit USDT Perpetual"
    ccxt_id: "bybit"
    default_type: "swap"
    rate_limit_ms: 50
    max_leverage: 25
    leverage: 5
    margin_mode: "cross"
    position_mode: "oneway"

  okx:
    name: "OKX Futures"
    ccxt_id: "okx"
    default_type: "swap"
    rate_limit_ms: 100
    max_leverage: 20
    leverage: 5
    margin_mode: "cross"
    position_mode: "oneway"

  kucoin:
    name: "KuCoin Futures"
    ccxt_id: "kucoinfutures"
    default_type: "swap"
    rate_limit_ms: 100
    max_leverage: 20
    leverage: 5
    margin_mode: "cross"
    position_mode: "oneway"

  kraken:
    name: "Kraken Futures"
    ccxt_id: "krakenfutures"
    default_type: "future"
    rate_limit_ms: 100
    max_leverage: 10
    leverage: 5
    margin_mode: "cross"
    position_mode: "oneway"

  gateio:
    name: "Gate.io Futures"
    ccxt_id: "gateio"
    default_type: "swap"
    rate_limit_ms: 100
    max_leverage: 20
    leverage: 5
    margin_mode: "cross"
    position_mode: "oneway"

symbols:
  scan_all: true

logging:
  level: "INFO"
  format: "json"
  console_output: true
  file_output: true
  log_dir: "logs"
  log_balances_on_startup: true
  log_balances_after_trade: true
  log_top_opportunities: true
  max_file_size_mb: 100
  backup_count: 10

redis:
  key_prefix: "trinity:"
  lock_timeout_sec: 10
